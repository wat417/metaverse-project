# 📄 資料全文出力：`copilot_metaverse_schedule.md`

## WBS：2Dメタバース風Webアプリ開発計画（再構成案 v1.1）

---

## 📌 運用原則（2025年7月8日時点追記）

- 設計フェーズは一時的にスケジュールから分離し、**動作確認結果に応じて後追いで実施**
- 構成整理・設計項目の未記載状態は許容対象とする（**履行進捗が優先**）
- Copilot は必要に応じて **構成補完責務を持つ**
- **実装 → 試験 → 設計** の順に従って、原則的な履行フローを構成

---

## フェーズ 0：計画立案と基盤整備

- 0.1 目的・方針・使用技術の確定
- 0.2 開発スケジュールとフェーズ区分の合意
- 0.3 日次管理テンプレートの整備
- 0.4 履歴構成資料群の同期整理（`copilot_project_structure.md`／日次記録）

---

## フェーズ 1：認証・DB設計（Day 1〜5）

- 1.1 Firebase Authentication（匿名＋ニックネーム）の構成
- 1.2 認証セキュリティルールの初期定義
- 1.3 アバター・チャット・状態データ構造の設計
- 1.4 Firebase Security Rules（読み書き管理）の構成
- 1.5 クライアント側：認証状態の取得ロジック

---

## フェーズ 2：開発環境構築・初期UI設計（Day 6〜8）

- 2.1 GitHubリポジトリ構成・CI環境の導入
- 2.2 SPA構成ファイルとルーティング初期構築
- 2.3 Phaser.jsの初期導入とCanvas描画配置
- 2.4 ログイン画面・チャットUIのモック作成
- 2.5 チャットUI／入力欄の基本レイアウト設計

---

## フェーズ 3：描画ロジック実装（Day 9〜13）

- 3.1 アバタースプライト描画（初期位置）
- 3.2 キー入力による移動処理とカメラ追従
- 3.3 衝突判定（境界・マップ内制限）
- 3.4 PhaserとUIレイアウトの整合調整

---

## フェーズ 4：通信処理と状態同期（Day 14〜20）

- 4.1 Firebaseとの送受信処理（アバター位置）
- 4.2 チャット送信・受信イベント処理
- 4.3 複数人状態の表示（他人のアバター同期）
- 4.4 切断・退出イベントの制御と通知表示
- 4.5 通信ログと基本モニタリングの整備

---

## フェーズ 5：UI拡張・履歴・設定周辺（Day 21〜25）

- 5.1 ルーム分離機能（ルームごとの表示・接続）
- 5.2 チャット履歴保存と読み込み
- 5.3 設定画面の作成とユーザー名・テーマ管理
- 5.4 通知表示のレイヤー設計（通信／状態）

---

## フェーズ 6：運用拡張機能（Day 26〜28）

- 6.1 Cloud Functionsによるチャットフィルター実装
- 6.2 一定時間操作なしユーザーの退室処理
- 6.3 操作ログ出力の構造と保存先設計

---

## フェーズ 7：統合実装とUI描画構成（Day 29〜35）

- 7.1 統計チャートの可視化構成  
　- チャート出力形式の検証（SVG対応）  
　- 種別階層集計の処理拡張  
　- chartType 切替構成とラベル制御

- 7.2 統計種別階層の可視化構成  
　- 親子分類拡張／グループ集計構成  
　- 多言語対応ラベル／UI構成整備

- 7.3 UI描画同期構成  
　- chartIcons.ts に基づく描画同期処理関数の定義  
　- UI選択処理との接続／表示形式セレクタの動的切替  
　- ラベル構成と型定義の統合整理

- 7.4 UI描画制御の抽象化  
　- イベント駆動による描画トリガー抽象化  
　- 選択肢定義の分離整備／表示構成の統合

- 7.5 表示抽象構成の履行着手  
　- UI統合検証／公開環境構成の整備  
　- 記録出力処理の統合

---

## フェーズ 8：公開環境対応とログ構成の確定（Day 36〜38）

- 8.1 UI統合検証の最終調整  
　- selectorGroup 表示構成の最終展開  
　- UI描画差分の安定化／fallback構成の整理

- 8.2 ログ出力構成の運用仕様確定  
　- chartType ごとのログラベル仕様の定義  
　- deploySelectorGroup フラグの挙動検証

- 8.3 公開環境への反映処理  
　- Vercel／GitHub Pages への展開  
　- selectorGroup 表示構成の展開可否制御

---

## フェーズ 9：リリース確認と運用移行（Day 39〜）

- 9.1 リリース状態の整合性検証  
　- UI・通信・描画の最終安定性チェック  
　- 公開構成後の動作確認

- 9.2 運用ドキュメント整備  
　- selectorGroup 表示構成の運用仕様書作成  
　- ログ出力監視機構の設計と導入

- 9.3 UI描画差分の自動検知対応  
　- 差分検知ロジックの設計と実装  
　- fallback構成との連携検証